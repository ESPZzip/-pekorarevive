<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PÃ¡gina de Comentarios â€” Firebase</title>
  <style>
    body{font-family:sans-serif;background:#0f1220;color:#fff;margin:0;padding:0}
    .container{max-width:700px;margin:0 auto;padding:20px}
    h1{margin:0 0 20px}
    .card{background:#151935;border-radius:10px;padding:16px;margin-bottom:16px}
    input,textarea,button{width:100%;margin:6px 0;padding:10px;border-radius:6px;border:none;font:inherit}
    input,textarea{background:#0e1330;color:#fff}
    button{background:#3b7bff;color:#fff;cursor:pointer}
    button:hover{opacity:0.9}
    .comment{border-bottom:1px solid #2a2a4a;padding:8px 0}
    .meta{font-size:12px;color:#aaa}
  </style>
  <!-- Firebase SDK -->
  <script type="module">
    // Importa los mÃ³dulos de Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // ðŸš¨ Reemplaza con tu propia configuraciÃ³n de Firebase
    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROYECTO.firebaseapp.com",
      projectId: "TU_PROYECTO",
      storageBucket: "TU_PROYECTO.appspot.com",
      messagingSenderId: "ID",
      appId: "APP_ID"
    };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.addEventListener('DOMContentLoaded', ()=>{
      const form = document.getElementById('commentForm');
      const nameEl = document.getElementById('name');
      const contentEl = document.getElementById('content');
      const list = document.getElementById('comments');

      // Publicar comentario
      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const name = nameEl.value.trim() || "AnÃ³nimo";
        const text = contentEl.value.trim();
        if(!text) return;
        await addDoc(collection(db, "comments"), {
          author: name,
          text: text,
          ts: serverTimestamp()
        });
        contentEl.value = "";
      });

      // Escuchar en tiempo real
      const q = query(collection(db, "comments"), orderBy("ts", "desc"));
      onSnapshot(q, (snapshot)=>{
        list.innerHTML = "";
        snapshot.forEach(doc=>{
          const c = doc.data();
          const div = document.createElement('div');
          div.className = 'comment';
          div.innerHTML = `<div><b>${c.author}</b></div><div>${c.text}</div><div class="meta">${c.ts?.toDate? c.ts.toDate().toLocaleString(): ''}</div>`;
          list.appendChild(div);
        });
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>ðŸ’¬ Comentarios (Firebase)</h1>
    <div class="card">
      <form id="commentForm">
        <input id="name" placeholder="Tu nombre" maxlength="30" required />
        <textarea id="content" placeholder="Escribe tu comentario" maxlength="500" required></textarea>
        <button type="submit">Publicar</button>
      </form>
    </div>
    <div class="card" id="comments">
      <!-- Los comentarios aparecerÃ¡n aquÃ­ -->
    </div>
  </div>
</body>
</html>
